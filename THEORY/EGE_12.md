## Алгоритм решения задания 12

Написание программы для решения 12 задания состоит из **трех** основных этапов:

1. Формирование исходной строки
2. Реализация алгоритма программы для исполнителя на языке Python
3. Определение условия для верного ответа

Давайте подробнее разберем каждый из этих этапов. Для начала вам необходимо сформировать строку, с которой вы будете работать в дальнейшем. Обычно она задаётся конце задания в текстовом виде, например так: «_строка, состоящая из 134 идущих подряд цифр 9_».

Обычно это не вызывает никаких трудностей, нам достаточно определить переменную и присвоить ей значение нужного символа, умноженное на заданное количество.

Так, для условия выше строка будет формировать следующим образом:

`s = "9" * 134`

Во втором этапе нам требуется переписать представленный в условии алгоритм на языке Python. Как это делается и какие операторы и методы Python соответствуют командам исполнителя мы уже рассмотрели ранее.

Далее идёт самый трудный этап — определить значение, которое будем давать в ответ. В самом простом варианте от нас могут потребовать дать в ответ строку, полученную в результате работы алгоритма. В таком случае, после завершения работы цикла выводим на экран значение переменной, в которой содержится наша строка.

Но бывают и другие формулировки, например такая: «_Определите наименьшее значение n, при котором сумма цифр в строке, получившейся в результате выполнения программы, равна 15_».

Полное условие данного задания звучит так:

«_Исполнитель Редактор получает на вход строку цифр и преобразовывает её. Редактор может выполнять две команды, в обеих командах v и w обозначают цепочки цифр.  
А) заменить (v, w).  
Эта команда заменяет в строке первое слева вхождение цепочки v на цепочку w. Например, выполнение команды заменить (111, 27) преобразует строку 05111150 в строку 0527150.  
Если в строке нет вхождений цепочки v, то выполнение команды заменить (v, w) не меняет эту строку.  
Б) нашлось (v).  
Эта команда проверяет, встречается ли цепочка v в строке исполнителя Редактор. Если она встречается, то команда возвращает логическое значение «истина», в противном случае возвращает значение «ложь». Строка исполнителя при этом не изменяется.  
Дана программа для Редактора:_


```
НАЧАЛО
    ПОКА нашлось (12) ИЛИ нашлось (322) ИЛИ нашлось (222)
       ЕСЛИ нашлось (12)
           ТО заменить (12, 2)
       КОНЕЦ ЕСЛИ
       ЕСЛИ нашлось (322)
           ТО заменить (322, 21)
       КОНЕЦ ЕСЛИ
       ЕСЛИ нашлось (222)
           ТО заменить (222, 3)
       КОНЕЦ ЕСЛИ
    КОНЕЦ ПОКА
КОНЕЦ
```


_На вход приведённой выше программе поступает строка, начинающаяся с цифры «1», а затем содержащая n цифр «2» (3 < n < 10 000).  
Определите наименьшее значение n, при котором сумма цифр в строке, получившейся в результате выполнения программы, равна 15_.»

В таком случае, необходимо цикл `while` поместить внутри цикла со счетчиком `for`, в котором мы и будем перебирать все возможные значения `n`. А после выполнения цикла `while` будем проверять сумму цифр в получившейся строке и сравнивать её с 15.

Если в таком условии получим **истину**, то даём в ответ текущее значение `n`. Если получаем в условии **ложь**, то увеличиваем значение `n` и цикл `while` заново проводит все необходимые замены.

Решение данного задания будет следующим:

%% Перебираем все n
 3 < n 10 000 %%
 

```
for n in range(4, 10000):
    # Формируем строку
    s = "1" + "2" * n
    # Программа Редактора
    while "12" in s or "322" in s or "222" in s:
        s = s.replace("12", "2", 1)
        s = s.replace("322", "21", 1)
        s = s.replace("222", "3", 1)
    # Ищем сумму цифр в строке
    sm = sum(int(d) for d in s)
    # Если сумма равна 15
    if sm == 15:
        # Выводим n
        print(n)
        # Завершаем работу for
        break

```

### Пример 1

_Исполнитель Редактор получает на вход строку цифр и преобразовывает её. Редактор может выполнять две команды, в обеих командах v и w обозначают цепочки цифр.  
А) заменить (v, w).  
Эта команда заменяет в строке первое слева вхождение цепочки v на цепочку w. Например, выполнение команды  
заменить (111, 27) преобразует строку 05111150 в строку 0527150. Если в строке нет вхождений цепочки v, то выполнение команды заменить (v, w) не меняет эту строку.  
Б) нашлось (v).  
Эта команда проверяет, встречается ли цепочка v в строке исполнителя Редактор. Если она встречается, то команда возвращает логическое значение «истина», в противном случае возвращает значение «ложь». Строка исполнителя при этом не изменяется._

**_Дана программа для Редактора:_**

НАЧАЛО 
ПОКА нашлось (33333) ИЛИ нашлось (999) 
  ЕСЛИ нашлось (33333) 
    ТО заменить (33333, 99) 
    ИНАЧЕ заменить (999, 3)
  КОНЕЦ ЕСЛИ 
КОНЕЦ ПОКА 
КОНЕЦ

_Какая строка получится в результате применения приведённой ниже программы к строке, состоящей из 100 идущих подряд цифр 9? В ответе запишите полученную строку._

Здесь действуем по уже расписанному в начале алгоритму: формируем строку из ста девяток, переписываем алгоритм и после завершения работы цикла выводим полученную строку.

s = "9" * 100

while "33333" in s or "999" in s:
    if "33333" in s:
        s = s.replace("33333", "99", 1)
    else:
        s = s.replace("999", "3", 1)

print(s)

Получаем ответ — 333

### Пример 2

_Исполнитель Редактор получает на вход строку цифр и преобразовывает её. Редактор может выполнять две команды, в обеих командах v и w обозначают цепочки символов._

1. _заменить (v, w)_
2. _нашлось (v)_

_Первая команда заменяет в строке первое слева вхождение цепочки v на цепочку w. Если цепочки v в строке нет, эта команда не изменяет строку. Вторая команда проверяет, встречается ли цепочка v в строке исполнителя Редактор._

**_Дана программа для исполнителя Редактор:_**

НАЧАЛО
ПОКА нашлось (12) ИЛИ нашлось (322) ИЛИ нашлось (222)
  ЕСЛИ нашлось (12)
    ТО заменить (12, 2)
  КОНЕЦ ЕСЛИ
  ЕСЛИ нашлось (322)
    ТО заменить (322, 21)
  КОНЕЦ ЕСЛИ
  ЕСЛИ нашлось (222)
    ТО заменить (222, 3)
  КОНЕЦ ЕСЛИ
КОНЕЦ ПОКА
КОНЕЦ

_На вход приведённой выше программе поступает строка, начинающаяся с цифры «1», за которой следуют n цифр «2» (3 < n < 1000). Определите **наибольшую** длину строки, которая может быть результатом выполнения программы._

Программа для исполнителя здесь аналогична той, которую мы рассматривали ранее. Но главное отличие здесь в величине, которую необходимо дать в ответ. Здесь нужно найти наибольшую длину строки, которая получается после работы алгоритма Редактора.

Для поиска максимальной длины можем использовать стандартную конструкцию:

max_len = -float("inf")
    if len(s) > max_len:
        max_len = len(s)

Здесь мы инициализируем переменную `max_len` и присваиваем ей значение минус бесконечность (для поиска минимального мы бы присваивали плюс бесконечность). Далее проверяем длину строки `s`, если она больше текущего значения `max_len`, то записываем в переменную `max_len` значение длины строки.

Естественно, условие должно находиться внутри цикла, а объявление переменной — до цикла.

В остальном же, решение этого задание будет аналогично уже рассмотренному ранее.

max_len = -float("inf")

for n in range(4, 1000):
    s = "1" + "2" * n

    while "12" in s or "322" in s or "222" in s:
        s = s.replace("12", "2", 1)
        s = s.replace("322", "21", 1)
        s = s.replace("222", "3", 1)

    # Поиск максимальной длины
    if len(s) > max_len:
        max_len = len(s)

print(max_len)

В ответ записываем число 9

### Пример 3

_Исполнитель Редактор получает на вход строку цифр и преобразовывает её. Редактор может выполнять две команды, в обеих командах v и w обозначают цепочки цифр._

_А) **заменить** (v, w).  
Эта команда заменяет в строке первое слева вхождение цепочки v на цепочку w. Например, выполнение команды **заменить** (111, 27) преобразует строку 05111150 в строку 0527150.  
Если в строке нет вхождений цепочки v, то выполнение команды **заменить** (v, w) не меняет эту строку._

_Б) **нашлось** (v).  
Эта команда проверяет, встречается ли цепочка v в строке исполнителя Редактор. Если она встречается, то команда возвращает логическое значение «истина», в противном случае возвращает значение «ложь». Строка исполнителя при этом не изменяется._

**_Дана программа для Редактора:_**

НАЧАЛО
ПОКА нашлось (52) ИЛИ нашлось (2222) ИЛИ нашлось (1122)
   ЕСЛИ нашлось (52)
     ТО заменить (52, 11)
   КОНЕЦ ЕСЛИ
   ЕСЛИ нашлось (2222)
     ТО заменить (2222, 5)
   КОНЕЦ ЕСЛИ
   ЕСЛИ нашлось (1122)
     ТО заменить (1122, 25)
   КОНЕЦ ЕСЛИ
КОНЕЦ ПОКА
КОНЕЦ 

_На вход приведённой выше программе поступает строка, начинающаяся с цифры «5», а затем содержащая n цифр «2» (3 < n < 10 000)._

_Определите **наименьшее** значение n, при котором сумма цифр в строке, получившейся в результате выполнения программы, оканчивается на 7._

В данном задании все также в цикле `for` формируем строку, переписываем алгоритм из условия и находим сумму цифр в строке через списочное выражение:

sm = sum(int(d) for d in s)

Но здесь нам необходимо установить, что эта сумма оканчивается на 7. Сделать это можно двумя способами:

1. Перевести сумму в строку и взять последний элемент строки, сравнив его с символом «7»:

    if str(sm)[-1]== "7":
        print(n)
        break

2. Взять остаток от деления суммы на 10 и сравнить его с числом 7:

    if sm % 10 == 7:
        print(n)
        break

Полный код решения данного задания следующий:

for n in range(4, 10000):
    s = "5" + "2" * n

    while "52" in s or "2222" in s or "1122" in s:
        s = s.replace("52", "11", 1)
        s = s.replace("2222", "5", 1)
        s = s.replace("1122", "25", 1)

    # Ищем сумму цифр в строке
    sm = sum(int(d) for d in s)

    # Поиск максимальной длины
    if str(sm)[-1]== "7":
        print(n)
        break

В результате работы программы получаем ответ — 5.